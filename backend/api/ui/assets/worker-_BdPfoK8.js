(function(){"use strict";let t=null;self.addEventListener("message",e=>{e.data&&e.data.tenantId?(console.log("Worker received tenantId:",e.data.tenantId),t=e.data.tenantId):e.data&&e.data.tenantId===null&&(console.log("Worker received tenantId removal"),t=null)}),setInterval(async()=>{const e="/api/v1/account/refresh";console.log("Worker fetching new token with tenantId:",t);const n=await fetch(e,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...t&&{"X-Tenant-ID":t}}}),a=await n.json(),s={message:"Unauthorized",code:n.status};if(!n.ok||n.status===401)return self.postMessage(s);self.postMessage(a)},6e4)})();
